<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport">
        <title>CONTA</title>
        <link rel="stylesheet" type="text/css" href="css/styles.css" />
    </head>
    <body>

        <div id="divT">
            <% for(var i=0; i<arreglo.length; i++){ %>
                <table>
                    <tr>
                        <th colspan="2"><%= arreglo[i].concepto %></th>
                    </tr>
                    <%
                    var tam = arreglo[i].debe.length
                    if(tam
                    <arreglo[i].haber.length){ tam=arreglo[i].haber.length;
                                               }
                                               %>
                        <% for(var j=0; j<tam; j++){ %>
                            <tr>
                                <td><%= arreglo[i].debe[j] %></td>
                                <td><%= arreglo[i].haber[j] %></td>
                            </tr>
                            <% } %>
                            <tr>
                                <% if(arreglo[i].totalDebe>arreglo[i].totalHaber){ %>
                                <th><%= arreglo[i].saldo %></th>
                                <th></th>
                                <% }else{ %>
                                <th></th>
                                <th><%= arreglo[i].saldo %></th>
                                <% }%>
                            </tr>
                </table>
                <br />
                <% } %>
        </div>

        <div id="divEResultados">
            <table>
                <tr>
                    <th colspan="3">ESTADO DE RESULTADOS</th>
                </tr>
                <tr>
                    <td>Ventas Netas</td>
                    <td></td>
                    <td><%= totalesEResu[0] %></td>
                </tr>
                <tr>
                    <td>Costo de lo Vendido</td>
                    <td></td>
                    <td><%= totalesEResu[1] %></td>
                </tr>
                <tr>
                    <td>Utilidad Bruta</td>
                    <td></td>
                    <%var utiBruta = totalesEResu[0]-totalesEResu[1]%>
                    <td><%= utiBruta %></td>
                </tr>
                <tr>
                    <td>Gastos de Operacion</td>
                    <%var gOperacion = totalesEResu[2]+totalesEResu[3]%>
                </tr>
                <tr>
                    <td>de Ventas</td>
                    <td><%= totalesEResu[2] %></td>
                    <td></td>
                </tr>
                <tr>
                    <td>de Ventas</td>
                    <td><%= totalesEResu[3] %></td>
                    <td><%= gOperacion%></td>
                </tr>
                <tr>
                    <td>Utilidad de Operacion</td>
                    <%var utiOperacion = utiBruta-gOperacion%>
                    <td></td>
                    <td><%= utiOperacion%></td>
                </tr>
                <tr>
                    <td>Resultado Integral de Financiamiento</td>
                    <%var resuIntegral = totalesEResu[4]-totalesEResu[5]%>
                </tr>
                <tr>
                    <td>Productos Financieros</td>
                    <td><%= totalesEResu[4] %></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Gastos Financieros</td>
                    <td><%= totalesEResu[5] %></td>
                    <td><%= resuIntegral%></td>
                </tr>
                <tr>
                    <td>Otros Ingresos y Gastos</td>
                    <%var otrosInyGas = totalesEResu[6]-totalesEResu[7]%>
                </tr>
                <tr>
                    <td>Otros Ingresos o Productos</td>
                    <td><%= totalesEResu[6] %></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Otros Gastos o Perdidas</td>
                    <td><%= totalesEResu[7] %></td>
                    <td><%= otrosInyGas%></td>
                </tr>
                <tr>
                    <td>PTU del ejercicio</td>
                    <td></td>
                    <td><%= totalesEResu[8] %></td>
                </tr>
                <tr>
                    <td>Utilidad antes de Impuestos</td>
                    <%var utiAImp = utiOperacion + resuIntegral + otrosInyGas - totalesEResu[8] %>
                    <td></td>
                    <td><%= utiAImp %></td>
                </tr>
                <tr>
                    <td>ISR del ejercicio</td>
                    <td></td>
                    <td><%= totalesEResu[9] %></td>
                </tr>
                <tr>
                    <td>Utilidad Neta</td>
                    <td></td>
                    <td><%= utiAImp - totalesEResu[9] %></td>
                </tr>
            </table>
        </div>
        
        <div id="divBalance">
            <table>
                <tr>
                    <th colspan="4">Balance</th>
                </tr>
                <tr>
                    <th colspan="2">ACTIVO</th>
                    <th colspan="2">PASIVO</th>
                </tr>
                <tr>
                    <td colspan="2">Corto Plazo</td>
                    <td colspan="2">Corto Plazo</td>
                </tr>
                <% var totalA=0, totalP=0, totalC=0; %>
                <%
                    var tam = cortoAP[0].length;
                    if(tam<cortoAP[1].length){
                        tam = cortoAP[1].length                           
                    }
                    for(var i=0; i<tam; i++){ 
                %>
                    <tr>
                        <% if( cortoAP[0][i] !== undefined){ %>
                            <% totalA = totalA + cortoAP[0][i].saldo; %>
                            <td><%= cortoAP[0][i].concepto %></td>
                            <td><%= cortoAP[0][i].saldo %></td>
                        <% } %>
                        <% if( cortoAP[1][i] !== undefined){ %>
                            <% totalP = totalP + cortoAP[1][i].saldo; %>
                            <td><%= cortoAP[1][i].concepto %></td>
                            <td><%= cortoAP[1][i].saldo %></td>
                        <% } %>
                    </tr>
                <% } %>
                    <tr>
                        <td colspan="2">Largo Plazo</td>
                        <td colspan="2">Largo Plazo</td>
                    </tr>
                    <%
                        var tam = largoAP[0].length;
                        if(tam<largoAP[1].length){
                            tam = largoAP[1].length                           
                        }
                        for(var i=0; i<tam; i++){ 
                    %>
                        <tr>
                            <% if( largoAP[0][i] !== undefined){ %>
                                <% totalA = totalA + largoAP[0][i].saldo; %>
                                <td><%= largoAP[0][i].concepto%></td>
                                <td><%= largoAP[0][i].saldo%></td>
                            <% } %>
                            <% if( largoAP[1][i] !== undefined){ %>
                                <% totalP = totalP + largoAP[1][i].saldo; %>
                                <td><%= largoAP[1][i].concepto%></td>
                                <td><%= largoAP[1][i].saldo%></td>
                            <% } %>
                        </tr>
                    <% } %>
                    <tr>
                        <th>Total Activo</th>
                        <td><%= totalA %></td>

                        <th>Total Pasivo</th>
                        <td><%= totalP %></td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td colspan="2">CAPITAL</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>

                        <% for(var i=0; i<capitalC.length; i++){ %>
                        <tr>
                            <td></td>
                            <td></td>
                            <% if( capitalC[i] !== undefined){ %>
                                <% totalC = totalC + capitalC[i].saldo; %>
                                <td><%= capitalC[i].concepto%></td>
                                <td><%= capitalC[i].saldo%></td>
                            <% } %>
                        </tr>
                        <% } %>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>

                        <th>Total Capital</th>
                        <td><%= totalC %></td>
                    </tr>
                    <tr>
                        <th colspan="2">Total Activo</th>
                        <th colspan="2">Total Pasivo + Capital</th>
                    </tr>
                    <tr>
                        <td colspan="2"><%= totalA %></td>
                        <td colspan="2"><%= totalP + totalC%></td>
                    </tr>
            </table>
        </div>

    </body>
</html>